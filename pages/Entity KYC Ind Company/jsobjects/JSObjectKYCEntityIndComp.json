{
  "unpublishedCollection": {
    "name": "JSObjectKYCEntityIndComp",
    "pageId": "Entity KYC Ind Company",
    "pluginId": "js-plugin",
    "pluginType": "JS",
    "actions": [],
    "archivedActions": [],
    "body": "export default {\n\tmyVar1: [],\n\t\tdocShortForms: {\n\t\t'COI': 'Certificate of Incorporation',\n\t\t'MAA':'Memorandum & Article of Association',\n\t\t'PAN': 'PAN',\n\t\t'POI': 'Proof of Identification',\n\t\t'POA':'Proof of Address',\n\t\t'LDIR': 'List of Directors with DIN',\n\t\t'CC': 'Cancelled Cheque',\n\t\t'IEC': 'Import Export Certificate',\n\t\t'BR': 'Board Resolution',\n\t\t'BOD': 'Beneficial ownership declaration'\n\t},\n\tmyFungenerateOID: () => {\n\t\t//write code here\n\treturn Math.floor((1 + Math.random()) * 0x10000).toString(16).substring(1).concat('OID');\n\t},\n\t\tgetOldFilePath: (docType) => {\n\t\t\tconst list = ListDocsQuery.data.filter((entry) => {\n\t\t\tconst dirs = entry.fileName.split(\"/\");\n\t\t\treturn dirs[2].startsWith(docType);\n\t\t\t});\n\t\t\treturn list.length > 0 ? list[0].fileName : null;\n\t},\n\tdeleteIfFileExist: async (docType) => {\n\t\t\tconst oldFilePath = this.getOldFilePath(docType);\n\t\t\tif(oldFilePath !== null) {\n\t\t\t\tawait DeleteFileQuery.run(undefined, undefined, {\n\t\t\t\t\t\tpath: oldFilePath\n\t\t\t\t});\n\t\t\t}\n\t},\n\tgetPOIUploadPath: () => {\n\tlet path = `${appsmith.store.FilePath}/${appsmith.store.customerOID}_EntityIndComp/POI__`;\n\t\tif(SelectPOIDocName.selectedOptionValue) {\n\t\t\tpath = path + SelectPOIDocName.selectedOptionValue + '__';\n\t\t}\n\t\tpath = path + selectPOI.files[0].name;\n\t\treturn path;\n\t},\n\tgetPOAUploadPath: () => {\n\tlet path = `${appsmith.store.FilePath}/${appsmith.store.customerOID}_EntityIndComp/POA__`;\n\t\tif(SelectPOADocName.selectedOptionValue) {\n\t\t\tpath = path + SelectPOADocName.selectedOptionValue + '__';\n\t\t}\n\t\tpath = path + selectPOA.files[0].name;\n\t\treturn path;\n\t},\n  myFunUploadKYCEntityIndCompany: async () => {\n\t\t\n\t\t\tif(selectEntityCertIncorp.files.length === 1) {\n\t\t\t\tawait this.deleteIfFileExist('COI');\n\t\t  \tawait\tQueryInsertKYCEntityIndComp.run({ \n\t\t\t\t\tdocType: 'Certificate of Incorportation', \n\t\t\t\t\tdocPathFilename : selectEntityCertIncorp.files[0].name\n\t\t\t\t});\n\t\t\t\tQueryCertOfIncorp.run();\n\t\t\t}\n\t\n\t\t\tif(selectEntityArtOfAssoc.files.length === 1) {\n\t\t\t\tawait this.deleteIfFileExist('MAA');\n\t\t\t\tawait\tQueryInsertKYCEntityIndComp.run({\n\t\t\t\t\tdocType: 'Memorandum and Article of Association', \n\t\t\t\t\tdocPathFilename :selectEntityArtOfAssoc.files[0].name\n\t\t\t\t});\n\t\t\t\tQueryArtOfAssoc.run();\n\t\t\t}\n\t\n\t\t\tif(selectPAN.files.length === 1) {\n\t\t\t\tawait this.deleteIfFileExist('PAN');\n\t\t\t\tawait QueryInsertKYCEntityIndComp.run({\n\t\t\t\t\tdocType: 'PAN',\n\t\t\t\t\tdocPathFilename: selectPAN.files[0].name\n\t\t\t\t});\n\t\t\t\tQueryPAN.run();\n\t\t\t}\n\t\n\t\t\tif(selectPOA.files.length === 1) {\n\t\t\t\tawait this.deleteIfFileExist('POA');\n\t\t\t\tQueryPOA.run ();\n\t\t\t\tawait QueryInsertKYCEntityIndComp.run({ \n\t\t\t\t\tdocType: SelectPOADocName.selectedOptionValue,\n\t\t\t\t\tdocPathFilename :selectPOA.files[0].name\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif(selectPOI === 1) {\n\t\t\t\tawait this.deleteIfFileExist('POI');\n\t\t\t\tawait QueryInsertKYCEntityIndComp.run({ \n\t\t\t\t\tdocType:SelectPOIDocName.selectedOptionValue,\n\t\t\t\t\tdocPathFilename :selectPOI.files[0].name\n\t\t\t\t});\n\t\t\t\tQueryPOI.run();\n\t\t\t}\n\t\n\t\t\tif(selectListOfDirectors.files.length === 1) {\n\t\t\t\tawait this.deleteIfFileExist('POI');\n\t\t\t\tawait QueryInsertKYCEntityIndComp.run({ \n\t\t\t\t\tdocType:'List Of Directors',\n\t\t\t\t\tdocPathFilename :selectListOfDirectors.files[0].name\n\t\t\t\t});\n\t\t\t\tQueryDirectorsList.run();\n\t\t\t}\n\t\n\t\t\tif(selectCanclChq.files.length === 1) {\n\t\t\t\tawait this.deleteIfFileExist('CC');\n\t\t\t\tawait QueryInsertKYCEntityIndComp.run({ \n\t\t\t\t\tdocType: 'Cancelled Cheque',\n\t\t\t\t\tdocPathFilename: selectCanclChq.files[0].name\n\t\t\t\t});\n\t\t\t\tQueryCanclChq.run();\n\t\t\t}\n\t\n\t\t\tif(selectImpExpCert.files.length === 1) {\n\t\t\t\tawait this.deleteIfFileExist('IEC');\n\t\t\t\tawait QueryInsertKYCEntityIndComp.run({ \n\t\t\t\t\tdocType:'Import Export Certificate',\n\t\t\t\t\tdocPathFilename :selectImpExpCert.files[0].name\n\t\t\t\t});\n\t\t\t\tQueryImpExpCert.run();\n\t\t\t}\n\t\n\t\t\tif(selectBoardResolution.files.length === 1) {\n\t\t\t\tawait this.deleteIfFileExist('BR');\n\t\t\t\tQueryBoardResolution.run();\n\t\t\t\tawait QueryInsertKYCEntityIndComp.run({ \n\t\t\t\t\tdocType:'Board Resolution',\n\t\t\t\t\tdocPathFilename: selectBoardResolution.files[0].name\n\t\t\t\t});\n\t\t\t}\n\t\n\t\t\tif(selectBeneOwnDeclaration.files.length === 1) {\n\t\t\t\tawait this.deleteIfFileExist('BOD');\n\t\t\t\tawait QueryInsertKYCEntityIndComp.run({ \n\t\t\t\t\tdocType:'Beneficial Ownership Declaration',\n\t\t\t\t\tdocPathFilename: selectBeneOwnDeclaration.files[0].name\n\t\t\t\t});\n\t\t\t\tQueryBeneDeclaration.run();\n\t\t\t}\n\n\t\t\tshowAlert('KYC Documents Uploaded');\n\t\t\tnavigateTo('Individual KYC Summary', {});\n\t},\n\tgetTableData: () => {\n\t\treturn ListDocsQuery.data.map((entry) => {\n\t\t\tconst dirs = entry.fileName.split(\"/\");\n\t\t\tconst fileDetails = dirs[2].split(\"__\");\n\t\t\treturn {\n\t\t\t\tDocumentType: this.docShortForms[fileDetails[0]],\n\t\t\t\tDocumentName: fileDetails.length === 3 ? fileDetails[1] : '-',\n\t\t\t\tFileName: fileDetails[fileDetails.length - 1],\n\t\t\t\tDownload: '',\n\t\t\t\tRemove: '',\n\t\t\t\tpath: entry.fileName\n\t\t\t};\n\t\t});\n\t},\n\tdownloadFile: async (fileName, path) => {\n\t\tshowAlert(`File name for download: ${fileName} ${path}`);\n\t\tconst name = fileName;\n\t\tawait storeValue('tempfileName', fileName);\n\t\tawait downloadFileQuery.run(()=> {\n\t\t\t\tdownload(atob(downloadFileQuery.data.fileData), appsmith.store.tempfileName);\n\t\t\t}, undefined, {\n\t\t\tpath: path\n\t\t});\n\t},\n\tremoveFile: async (path) => {\n\t\tawait DeleteFileQuery.run(() => {\n\t\t\tListDocsQuery.run();\n\t\t}, undefined, {\n\t\t\tpath: path\n\t\t});\n\t\t\n\t}\n}\n",
    "variables": [
      {
        "name": "myVar1",
        "value": []
      },
      {
        "name": "docShortForms",
        "value": {
          "POI": "Proof of Identification",
          "POA": "Proof of Address",
          "TRC": "Tax registration Certificate",
          "CC": "Cancelled Cheque"
        }
      }
    ]
  },
  "id": "Entity KYC Ind Company_JSObjectKYCEntityIndComp",
  "deleted": false,
  "gitSyncId": "620a44fa5acff70fe6310821_620b96b6febb1e7beb8ea114"
}